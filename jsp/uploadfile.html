<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Document</title>
    <style>
        .bar {
            height: 18px;
            background: green;
        }
    </style>
</head>
<body>
<div id="progress">
    <div class="bar" style="width: 0%;"></div>
</div>
<form>
    <input id="fileupload" type="file" name="files[]" multiple>
</form>
<img src="" alt="">
<script src="../js/jquery.min.js"></script>

<script src="../lib/jquery-fileupload/jquery.ui.widget.js"></script>
<script src="../lib/jquery-fileupload/jquery.iframe-transport.js"></script>
<script src="../lib/jquery-fileupload/jquery.fileupload.js"></script>
<script>
    $('#fileupload').fileupload({
        dataType: 'json',
        // 文件上传完成后，执行的回调函数
        done: function (e, data) {
            console.log(data)
            console.log(data.result)
            console.log(data.result.picAddr)
            // 将图片赋给展示出来 fileuploadPic img
            $('img').attr('src',data.result.picAddr);
            // 将图片信息赋给 隐藏的 input 框
            $('#brandLogo').val(data.result.picAddr)
        }
    });
//    $(function () {
//        $('#fileupload').fileupload({
//            url:'',
//            dataType: 'json',
//            add: function (e, data) {
//                console.log(e)
//                console.log(data)
//                data.context = $('<button/>').text('Upload')
//                        .appendTo(document.body)
//                        .click(function () {
//                            $(this).replaceWith($('<p/>').text('Uploading...'));
//                            data.submit();
//                        });
//            },
//            done: function (e, data) {
//                console.log(e)
//                console.log(data)
//                $.each(data.result.files, function (index, file) {
//                    $('<p/>').text(file.name).appendTo(document.body);
//                });
//            },
//            progressall: function (e, data) {
//                console.log(e)
//                console.log(data)
//                var progress = parseInt(data.loaded / data.total * 100, 10);
//                $('#progress .bar').css(
//                        'width',
//                        progress + '%'
//                );
//            }
//        });
//    });
</script>
</body>
</html>